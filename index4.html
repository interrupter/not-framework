<!DOCTYPE html>
<html>
<head>
	<title>Mocha Tests</title>
	<link rel="stylesheet" href="node_modules/mocha/mocha.css">
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
	<style>
		.active {
			background-color: green;
		}
	</style>
	<script src="build/not-framework.js"></script>
	<script src="bower_components/faker/build/build/faker.js" type = "text/javascript"></script>
</head>

<body>
	<div id="test"></div>
	<script>
		let data = [];

		for(let t = 0; t < 100; t++){
			data.push({
				id: faker.random.number(),
				name: faker.name.firstName(),
				status: faker.random.boolean(),
				email: faker.internet.email(),
				date: faker.date.future().toString()
			});
		}

		let renderForm = function() {
			let table = new notFramework.notTable({
				data: {rows: data},
				options: {
					procRow:(trow, titem)=>{
						if(titem.status || titem.name.indexOf('cheatcode')>-1){
							trow.classList.add('success');
						}else{
							trow.classList.add('danger');
						}
						return trow;
					},
					fields:[
						{
                path: ':id',
                title: 'ID',
                sortable: true
            }, {
                path: ':name',
                title: 'Название',
                sortable: true,
								editable: true,
								searchable: true
            },{
                path: ':status',
                title: 'Status',
                sortable: true,
								searchable: true,
								events : {
									click: function(input){
										console.log(...arguments);
										input.item.status = !input.item.status;
										table.updateData();
									}
								}
            },{
                path: ':email',
                title: 'EMail',
                sortable: true,
								searchable: true
            },{
                path: ':date',
                title: 'Date',
                sortable: true,
								searchable: true
            },
					],
          pageSize: 50,
          pageNumber: 0,
          onePager: true,
					helpers: {},
					targetEl: document.getElementById('test')
				}
			});
		};
		notFramework.notTemplateCache.addLibFromURL('./test/templates/lib.html').then(renderForm).catch((e) => {
			console.error('no templates lib', e);
		});
	</script>
</body>

</html>
